#pragma checksum "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "59ac4c44c3699557329f0cebf0aad9320a0cb600"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_CreditRequest_CreditRequestDetail), @"mvc.1.0.view", @"/Views/CreditRequest/CreditRequestDetail.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/CreditRequest/CreditRequestDetail.cshtml", typeof(AspNetCore.Views_CreditRequest_CreditRequestDetail))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
using DAL;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"59ac4c44c3699557329f0cebf0aad9320a0cb600", @"/Views/CreditRequest/CreditRequestDetail.cshtml")]
    public class Views_CreditRequest_CreditRequestDetail : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<DAL.Models.CreditRequest.CreditRequestViewModel>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("href", new global::Microsoft.AspNetCore.Html.HtmlString("~/plugins/datepicker/datepicker3.css"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("rel", new global::Microsoft.AspNetCore.Html.HtmlString("stylesheet"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("href", new global::Microsoft.AspNetCore.Html.HtmlString("~/plugins/datatables-bs4/css/dataTables.bootstrap4.css"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/js/jquery.validate.js"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_4 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/plugins/datepicker/bootstrap-datepicker.js"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_5 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/plugins/datatable/jquery.datatable.js"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_6 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/plugins/datatables-bs4/js/dataTables.bootstrap4.js"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_7 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/plugins/custom-thousands-separator/dist/number-divider.js"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#line 2 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
  

    string titlePage = "";
    if (Model.CreaditType == Contanst.CreditType_TamUng)
    {
        titlePage = Model.Id == 0 ? "Thông tin tạm ứng" : "Yêu cầu tạm ứng: " + Model.Code;
    }else if (Model.CreaditType == Contanst.CreditType_HoanUng)
    {
        titlePage = Model.Id == 0 ? "Thông tin hoàn ứng" : "hoàn ứng: " + Model.Code;
    }
    ViewData["Title"] = titlePage;
    Layout = "~/Views/Shared/_Layout.cshtml";





#line default
#line hidden
            BeginContext(520, 2, true);
            WriteLiteral("\r\n");
            EndContext();
#line 21 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
   

    string role = ViewBag.Role;
    string userName = ViewBag.UserLogin;
    string hideAction = string.Empty;

    if (Model.Status != Contanst.CreditRequestStatus_Draft)
    {
        hideAction = "style=display:none";
    }

#line default
#line hidden
            BeginContext(767, 4, true);
            WriteLiteral("\r\n\r\n");
            EndContext();
            DefineSection("styles", async() => {
                BeginContext(787, 8, true);
                WriteLiteral("\r\n\r\n    ");
                EndContext();
                BeginContext(795, 69, false);
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("link", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "59ac4c44c3699557329f0cebf0aad9320a0cb6007302", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                EndContext();
                BeginContext(864, 6, true);
                WriteLiteral("\r\n    ");
                EndContext();
                BeginContext(870, 87, false);
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("link", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "59ac4c44c3699557329f0cebf0aad9320a0cb6008634", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_2);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                EndContext();
                BeginContext(957, 463, true);
                WriteLiteral(@"

    <style>
        #btn-add-todetail {
            font-size: 9pt !important;
        }

        .text-display-money {
            position: relative;
            top: 4px;
            font-size: 14pt;
        }

        .typeahead {
            width: 100% !important;
        }

        .badge-status {
            font-weight: bold;
        }

        .form-group {
            margin-bottom: 0px !important;
        }
    </style>
");
                EndContext();
            }
            );
            BeginContext(1423, 157, true);
            WriteLiteral("<section class=\"content-header\">\r\n    <div class=\"container-fluid\">\r\n        <div class=\"row mb-2\">\r\n            <div class=\"col-sm-6\">\r\n                <h1>");
            EndContext();
            BeginContext(1582, 17, false);
#line 67 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                Write(ViewData["Title"]);

#line default
#line hidden
            EndContext();
            BeginContext(1600, 171, true);
            WriteLiteral("</h1>\r\n            </div>\r\n            <div class=\"col-sm-6\">\r\n                <ol class=\"breadcrumb float-sm-right\">\r\n                    <li class=\"breadcrumb-item\">\r\n\r\n");
            EndContext();
#line 73 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                          

                            if (Model.CreatedBy == userName)
                            {

#line default
#line hidden
            BeginContext(1894, 53, true);
            WriteLiteral("                                <input type=\"button\" ");
            EndContext();
            BeginContext(1949, 10, false);
#line 77 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                                 Write(hideAction);

#line default
#line hidden
            EndContext();
            BeginContext(1960, 81, true);
            WriteLiteral(" value=\"Lưu\" class=\"btn btn-warning\" id=\"btn-save\" style=\"margin-right:5px;\" />\r\n");
            EndContext();
#line 78 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                            }


                            if (Model.Id != 0)
                            {

                                var approveMatrix = (DAL.Models.CreditRequest.CreditRequestMatrixModel)ViewBag.ApproveMatrix;



                                if (Model.CreaditType == Contanst.CreditType_TamUng)
                                {
                                    if (Model.Status == Contanst.CreditRequestStatus_Draft)
                                    {

#line default
#line hidden
            BeginContext(2543, 300, true);
            WriteLiteral(@"                                        <input type=""button"" value=""Gửi kiểm tra"" class=""btn btn-warning"" id=""btn-sentchecked"" style=""margin-right:5px;"" />
                                        <input type=""button"" value=""Huỷ"" class=""btn btn-warning"" id=""btn-cancel"" style=""margin-right:5px;"" />
");
            EndContext();
#line 94 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                    }

                                    if ((role == Contanst.Role_QuanLy || role == Contanst.Role_KeToan)
                                        && Model.Status == Contanst.CreditRequestStatus_Waiting
                                        && userName == approveMatrix.UserCheck)
                                    {

#line default
#line hidden
            BeginContext(3205, 307, true);
            WriteLiteral(@"                                        <input type=""button"" value=""OK, Gửi duyệt"" class=""btn btn-warning"" id=""btn-reviewed"" style=""margin-right:5px;"" />
                                        <input type=""button"" value=""Từ chối"" class=""btn btn-warning"" id=""btn-open-reject"" style=""margin-right:5px;"" />
");
            EndContext();
#line 102 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                    }

                                    if (role == Contanst.Role_BGD
                                        && Model.Status == Contanst.CreditRequestStatus_Reviewed
                                        && userName == approveMatrix.UserApprove)
                                    {

#line default
#line hidden
            BeginContext(3840, 303, true);
            WriteLiteral(@"                                        <input type=""button"" value=""Duyệt"" class=""btn btn-warning"" id=""btn-open-approve"" style=""margin-right:5px;"" />
                                        <input type=""button"" value=""Từ chối"" class=""btn btn-warning"" id=""btn-open-reject"" style=""margin-right:5px;"" />
");
            EndContext();
#line 110 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                    }

                                    if (role == Contanst.Role_KeToan
                                        && Model.Status == Contanst.CreditRequestStatus_Approved)
                                    {

#line default
#line hidden
            BeginContext(4392, 310, true);
            WriteLiteral(@"                                        <input type=""button"" value=""Đã thu/chi tiền"" class=""btn btn-warning"" id=""btn-completed"" style=""margin-right:5px;"" />
                                        <input type=""button"" value=""Từ chối"" class=""btn btn-warning"" id=""btn-open-reject"" style=""margin-right:5px;"" />
");
            EndContext();
#line 117 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                    }



                                }
                                else if (Model.CreaditType == Contanst.CreditType_HoanUng)
                                {
                                    if (Model.Status == Contanst.CreditRequestStatus_Draft)
                                    {

#line default
#line hidden
            BeginContext(5041, 300, true);
            WriteLiteral(@"                                        <input type=""button"" value=""Gửi kiểm tra"" class=""btn btn-warning"" id=""btn-sentchecked"" style=""margin-right:5px;"" />
                                        <input type=""button"" value=""Huỷ"" class=""btn btn-warning"" id=""btn-cancel"" style=""margin-right:5px;"" />
");
            EndContext();
#line 128 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                    }

                                    if ((role == Contanst.Role_QuanLy || role == Contanst.Role_KeToan)
                                        && Model.Status == Contanst.CreditRequestStatus_Waiting
                                        && userName == approveMatrix.UserCheck)
                                    {

#line default
#line hidden
            BeginContext(5703, 313, true);
            WriteLiteral(@"                                        <input type=""button"" value=""OK, Gửi kế toán"" class=""btn btn-warning"" id=""btn-sent-account"" style=""margin-right:5px;"" />
                                        <input type=""button"" value=""Từ chối"" class=""btn btn-warning"" id=""btn-open-reject"" style=""margin-right:5px;"" />
");
            EndContext();
#line 136 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                    }

                                    if (role == Contanst.Role_KeToan
                                        && Model.Status == Contanst.CreditRequestStatus_WaitingAccountant)
                                    {

#line default
#line hidden
            BeginContext(6274, 311, true);
            WriteLiteral(@"                                        <input type=""button"" value=""OK, Gửi duyệt"" class=""btn btn-warning"" id=""btn-sent-approve"" style=""margin-right:5px;"" />
                                        <input type=""button"" value=""Từ chối"" class=""btn btn-warning"" id=""btn-open-reject"" style=""margin-right:5px;"" />
");
            EndContext();
#line 143 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                    }


                                    if (role == Contanst.Role_BGD
                                        && Model.Status == Contanst.CreditRequestStatus_Reviewed
                                        && userName == approveMatrix.UserApprove)
                                    {

#line default
#line hidden
            BeginContext(6915, 303, true);
            WriteLiteral(@"                                        <input type=""button"" value=""Duyệt"" class=""btn btn-warning"" id=""btn-open-approve"" style=""margin-right:5px;"" />
                                        <input type=""button"" value=""Từ chối"" class=""btn btn-warning"" id=""btn-open-reject"" style=""margin-right:5px;"" />
");
            EndContext();
#line 152 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                    }



                                    if (role == Contanst.Role_KeToan
                                        && Model.Status == Contanst.CreditRequestStatus_Approved)
                                    {

#line default
#line hidden
            BeginContext(7471, 310, true);
            WriteLiteral(@"                                        <input type=""button"" value=""Đã thu/chi tiền"" class=""btn btn-warning"" id=""btn-completed"" style=""margin-right:5px;"" />
                                        <input type=""button"" value=""Từ chối"" class=""btn btn-warning"" id=""btn-open-reject"" style=""margin-right:5px;"" />
");
            EndContext();
#line 161 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                    }


                                }





#line default
#line hidden
            BeginContext(7867, 142, true);
            WriteLiteral("                                <input type=\"button\" value=\"Xuất PDF\" class=\"btn btn-warning\" id=\"btn-view-pdf\" style=\"margin-right:5px;\" />\r\n");
            EndContext();
#line 170 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"

                            }



                        

#line default
#line hidden
            BeginContext(8075, 472, true);
            WriteLiteral(@"
                    </li>

                </ol>
            </div>
        </div>
    </div><!-- /.container-fluid -->
</section>
<section class=""content"">
    <div class=""row"">


        <div class=""col-sm-12"">


            <div class=""card card-primary card-outline"">
                <div class=""card-body"">
                    <form class=""form-horizontal"" id=""form-creditRequest"">
                        <input type=""hidden"" id=""header-requestId""");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 8547, "\"", 8566, 1);
#line 194 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
WriteAttributeValue("", 8555, Model.Id, 8555, 11, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(8567, 29, true);
            WriteLiteral(" />\r\n                        ");
            EndContext();
            BeginContext(8597, 25, false);
#line 195 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                   Write(Html.HiddenFor(x => x.Id));

#line default
#line hidden
            EndContext();
            BeginContext(8622, 26, true);
            WriteLiteral("\r\n                        ");
            EndContext();
            BeginContext(8649, 34, false);
#line 196 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                   Write(Html.HiddenFor(x => x.UserRequest));

#line default
#line hidden
            EndContext();
            BeginContext(8683, 26, true);
            WriteLiteral("\r\n                        ");
            EndContext();
            BeginContext(8710, 29, false);
#line 197 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                   Write(Html.HiddenFor(x => x.Status));

#line default
#line hidden
            EndContext();
            BeginContext(8739, 26, true);
            WriteLiteral("\r\n                        ");
            EndContext();
            BeginContext(8766, 34, false);
#line 198 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                   Write(Html.HiddenFor(x => x.CreaditType));

#line default
#line hidden
            EndContext();
            BeginContext(8800, 351, true);
            WriteLiteral(@"

                        <div class=""row"">
                            <div class=""col-sm-6"">
                                <div class=""row form-group "">
                                    <label class=""col-md-4 col-form-label"">Mã *</label>
                                    <div class=""col-md-8"">
                                        ");
            EndContext();
            BeginContext(9152, 85, false);
#line 205 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                   Write(Html.TextBoxFor(x => x.Code, new { @class = "form-control", @disabled = "disabled" }));

#line default
#line hidden
            EndContext();
            BeginContext(9237, 395, true);
            WriteLiteral(@"
                                    </div>
                                </div>
                                <div class=""form-group row"">
                                    <label class=""col-md-4 col-form-label"">Loại yêu cầu *</label>
                                    <div class=""col-sm-8"">
                                        <input type=""text"" class=""form-control"" readonly");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 9632, "\"", 9712, 1);
#line 211 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
WriteAttributeValue("", 9640, Model.CreaditType == Contanst.CreditType_HoanUng?"Hoàn ứng":"Tạm ứng", 9640, 72, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(9713, 482, true);
            WriteLiteral(@" />
                                    </div>
                                </div>
                                <div class=""row form-group"">
                                    <label class=""col-md-4 col-form-label"">Ngày thực hiện *</label>
                                    <div class=""col-md-8"">
                                        <div class=""input-group date"">
                                            <input type=""text"" id=""DateRequest"" name=""DateRequest""");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 10195, "\"", 10315, 1);
#line 218 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
WriteAttributeValue("", 10203, Model.DateRequest.HasValue?Model.DateRequest.Value.ToString("dd/MM/yyyy"):DateTime.Now.ToString("dd/MM/yyyy"), 10203, 112, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(10316, 559, true);
            WriteLiteral(@" class=""form-control"">
                                            <span class=""input-group-addon group-date-icon""><i class=""far fa-calendar-alt""></i></span>
                                        </div>
                                    </div>

                                </div>
                                <div class=""row form-group "">
                                    <label class=""col-md-4 col-form-label"">Người thực hiện *</label>
                                    <div class=""col-md-8"">
                                        ");
            EndContext();
            BeginContext(10876, 92, false);
#line 227 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                   Write(Html.TextBoxFor(x => x.UserRequest, new { @class = "form-control", @disabled = "disabled" }));

#line default
#line hidden
            EndContext();
            BeginContext(10968, 88, true);
            WriteLiteral("\r\n                                    </div>\r\n                                </div>\r\n\r\n");
            EndContext();
#line 231 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                  
                                    if (Model.Id != 0)
                                    {

#line default
#line hidden
            BeginContext(11187, 627, true);
            WriteLiteral(@"                                        <div class=""form-group row"">
                                            <br /><br />
                                            <table class=""table table-bordered"">
                                                <thead>
                                                    <tr>
                                                        <th>File đính kèm</th>
                                                        <th>Ngày</th>
                                                        <th>User</th>
                                                        <th class=""text-center"" ");
            EndContext();
            BeginContext(11816, 10, false);
#line 242 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                                                            Write(hideAction);

#line default
#line hidden
            EndContext();
            BeginContext(11827, 399, true);
            WriteLiteral(@">
                                                            <input type=""button"" value=""Đính kèm file"" class=""btn btn-sm btn-primary"" id=""btn-open-upload"" />
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
");
            EndContext();
#line 248 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                                      
                                                        var lstAttach = (List<DAL.Models.AttactFileModel>)ViewBag.LstAttachment;
                                                        if (lstAttach.Any())
                                                        {
                                                            foreach (var item in lstAttach)
                                                            {

#line default
#line hidden
            BeginContext(12705, 144, true);
            WriteLiteral("                                                                <tr>\r\n                                                                    <td><a");
            EndContext();
            BeginWriteAttribute("href", " href=\"", 12849, "\"", 12932, 1);
#line 255 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
WriteAttributeValue("", 12856, Url.Content("~/upload/credit-request/"+item.ObjectId+"/" + item.FileName), 12856, 76, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginWriteAttribute("download", " download=\"", 12933, "\"", 12958, 1);
#line 255 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
WriteAttributeValue("", 12944, item.FileName, 12944, 14, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(12959, 45, true);
            WriteLiteral(" ><span class=\"fa fa-download\"></span>&nbsp; ");
            EndContext();
            BeginContext(13006, 13, false);
#line 255 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                                                                                                                                                                                                                 Write(item.FileName);

#line default
#line hidden
            EndContext();
            BeginContext(13020, 83, true);
            WriteLiteral("</a></td>\r\n                                                                    <td>");
            EndContext();
            BeginContext(13105, 88, false);
#line 256 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                                                    Write(item.CreatedDate.HasValue ? item.CreatedDate.Value.ToString("dd/MM/yyyy") : string.Empty);

#line default
#line hidden
            EndContext();
            BeginContext(13194, 79, true);
            WriteLiteral("</td>\r\n                                                                    <td>");
            EndContext();
            BeginContext(13275, 14, false);
#line 257 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                                                    Write(item.CreatedBy);

#line default
#line hidden
            EndContext();
            BeginContext(13290, 99, true);
            WriteLiteral("</td>\r\n                                                                    <td class=\"text-center\" ");
            EndContext();
            BeginContext(13391, 10, false);
#line 258 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                                                                        Write(hideAction);

#line default
#line hidden
            EndContext();
            BeginContext(13402, 80, true);
            WriteLiteral(">\r\n                                                                        <span");
            EndContext();
            BeginWriteAttribute("onclick", " onclick=\"", 13482, "\"", 13520, 3);
            WriteAttributeValue("", 13492, "DeleteAttachment(", 13492, 17, true);
#line 259 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
WriteAttributeValue("", 13509, item.Id, 13509, 10, false);

#line default
#line hidden
            WriteAttributeValue("", 13519, ")", 13519, 1, true);
            EndWriteAttribute();
            BeginContext(13521, 183, true);
            WriteLiteral("><i class=\"fa fa-trash\"></i></span>\r\n                                                                    </td>\r\n                                                                </tr>\r\n");
            EndContext();
#line 262 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                                            }


                                                        }
                                                        else
                                                        {

#line default
#line hidden
            BeginContext(13951, 255, true);
            WriteLiteral("                                                            <tr>\r\n                                                                <td colspan=\"5\"><span>Không có file đính kèm</span></td>\r\n                                                            </tr>\r\n");
            EndContext();
#line 271 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                                        }
                                                    

#line default
#line hidden
            BeginContext(14320, 166, true);
            WriteLiteral("\r\n\r\n\r\n                                                </tbody>\r\n                                            </table>\r\n                                        </div>\r\n");
            EndContext();
#line 279 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                    }
                                

#line default
#line hidden
            BeginContext(14560, 92, true);
            WriteLiteral("\r\n\r\n                            </div>\r\n                            <div class=\"col-sm-6\">\r\n");
            EndContext();
#line 285 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                  
                                    if (Model.CreaditType == Contanst.CreditType_HoanUng)
                                    {

#line default
#line hidden
            BeginContext(14818, 296, true);
            WriteLiteral(@"                                        <div class=""form-group row"">
                                            <label class=""col-md-4 col-form-label"">Mã TU liên quan *</label>
                                            <div class=""col-sm-8"">
                                                ");
            EndContext();
            BeginContext(15115, 73, false);
#line 291 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                           Write(Html.TextBoxFor(x => x.ReferRequestCode, new { @class = "form-control" }));

#line default
#line hidden
            EndContext();
            BeginContext(15188, 102, true);
            WriteLiteral("\r\n                                            </div>\r\n                                        </div>\r\n");
            EndContext();
#line 294 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                    }
                                

#line default
#line hidden
            BeginContext(15364, 2, true);
            WriteLiteral("\r\n");
            EndContext();
#line 297 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                  
                                    if (Model.CreaditType == Contanst.CreditType_TamUng)
                                    {

#line default
#line hidden
            BeginContext(15531, 296, true);
            WriteLiteral(@"                                        <div class=""form-group row"">
                                            <label class=""col-sm-4 col-form-label"">Số tiền tạm ứng *</label>
                                            <div class=""col-sm-8"">
                                                ");
            EndContext();
            BeginContext(15828, 96, false);
#line 303 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                           Write(Html.TextBoxFor(x => x.RequestedAmount, new { @class = "form-control", @disabled = "disabled" }));

#line default
#line hidden
            EndContext();
            BeginContext(15924, 102, true);
            WriteLiteral("\r\n                                            </div>\r\n                                        </div>\r\n");
            EndContext();
#line 306 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                    }
                                

#line default
#line hidden
            BeginContext(16100, 261, true);
            WriteLiteral(@"

                                <div class=""form-group row"">
                                    <label class=""col-sm-4 col-form-label"">Nội dung *</label>
                                    <div class=""col-sm-8"">
                                        ");
            EndContext();
            BeginContext(16362, 63, false);
#line 313 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                   Write(Html.TextBoxFor(x => x.Reason, new { @class = "form-control" }));

#line default
#line hidden
            EndContext();
            BeginContext(16425, 88, true);
            WriteLiteral("\r\n                                    </div>\r\n                                </div>\r\n\r\n");
            EndContext();
#line 317 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                  
                                    if (Model.CreaditType == Contanst.CreditType_TamUng
                                        && (Model.Status == Contanst.CreditRequestStatus_Approved || Model.Status == Contanst.CreditRequestStatus_Completed))
                                    {


#line default
#line hidden
            BeginContext(16838, 299, true);
            WriteLiteral(@"                                        <div class=""form-group row"">
                                            <label class=""col-sm-4 col-form-label"">Sồ tiền được duyệt *</label>
                                            <div class=""col-sm-8"">
                                                ");
            EndContext();
            BeginContext(17138, 95, false);
#line 325 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                           Write(Html.TextBoxFor(x => x.ApprovedAmount, new { @class = "form-control", @disabled = "disabled" }));

#line default
#line hidden
            EndContext();
            BeginContext(17233, 102, true);
            WriteLiteral("\r\n                                            </div>\r\n                                        </div>\r\n");
            EndContext();
#line 328 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                    }
                                

#line default
#line hidden
            BeginContext(17409, 255, true);
            WriteLiteral("\r\n                                \r\n                                <div class=\"form-group row\">\r\n                                    <label class=\"col-sm-4 col-form-label\">Tình trạng *</label>\r\n                                    <div class=\"col-sm-8\">\r\n");
            EndContext();
#line 335 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                          
                                            var lstStatus = (List<DAL.Models.StatusHistoryModel>)ViewBag.StatusHistory;
                                            if (lstStatus.Any())
                                            {


#line default
#line hidden
            BeginContext(17944, 86, true);
            WriteLiteral("                                                <table class=\"table table-bordered\">\r\n");
            EndContext();
#line 341 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                                      
                                                        foreach (var statusItem in lstStatus)
                                                        {
                                                            string classStatus = "";

                                                            if (statusItem.status == DAL.Contanst.CreditRequestStatus_Waiting)
                                                            {
                                                                classStatus = "<span class='badge badge-warning badge-status'>Chờ QL kiểm tra</span>";
                                                            }
                                                            if (statusItem.status == DAL.Contanst.CreditRequestStatus_Reviewed)
                                                            {
                                                                classStatus = "<span class='badge badge-warning badge-status'>Chờ GĐ duyệt</span>";
                                                            }
                                                            if (statusItem.status == DAL.Contanst.CreditRequestStatus_Approved)
                                                            {
                                                                classStatus = "<span class='badge badge-success badge-status'>Đã duyệt</span>";
                                                            }
                                                            if (statusItem.status == DAL.Contanst.CreditRequestStatus_Rejected)
                                                            {
                                                                classStatus = "<span class='badge badge-danger badge-status'>Từ chối</span>&nbsp;("+Model.RejectNote+")";
                                                            }
                                                            if (statusItem.status == DAL.Contanst.CreditRequestStatus_Canceled)
                                                            {
                                                                classStatus = "<span class='badge badge-danger badge-status'>Huỷ</span>";
                                                            }
                                                            if (statusItem.status == DAL.Contanst.CreditRequestStatus_WaitingAccountant)
                                                            {
                                                                classStatus = "<span class='badge badge-warning badge-status'>Chờ KT kiểm tra HS</span>";
                                                            }
                                                            if (statusItem.status == DAL.Contanst.CreditRequestStatus_Completed)
                                                            {
                                                                classStatus = "<span class='badge badge-success badge-status'>Đã thu/chi tiền</span>";
                                                            }

#line default
#line hidden
            BeginContext(21185, 134, true);
            WriteLiteral("                                                            <tr>\r\n                                                                <td>");
            EndContext();
            BeginContext(21320, 21, false);
#line 375 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                                               Write(Html.Raw(classStatus));

#line default
#line hidden
            EndContext();
            BeginContext(21341, 75, true);
            WriteLiteral("</td>\r\n                                                                <td>");
            EndContext();
            BeginContext(21418, 19, false);
#line 376 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                                                Write(statusItem.actionBy);

#line default
#line hidden
            EndContext();
            BeginContext(21438, 75, true);
            WriteLiteral("</td>\r\n                                                                <td>");
            EndContext();
            BeginContext(21515, 59, false);
#line 377 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                                                Write(statusItem.actionDate.Value.ToString("dd/MM/yyyy hh:mm tt"));

#line default
#line hidden
            EndContext();
            BeginContext(21575, 74, true);
            WriteLiteral("</td>\r\n                                                            </tr>\r\n");
            EndContext();
#line 379 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                                        }
                                                    

#line default
#line hidden
            BeginContext(21763, 58, true);
            WriteLiteral("                                                </table>\r\n");
            EndContext();
#line 382 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                            }
                                            else
                                            {
                                                if (Model.Status == DAL.Contanst.CreditRequestStatus_Draft)
                                                {

#line default
#line hidden
            BeginContext(22125, 114, true);
            WriteLiteral("                                                    <span class=\"badge badge-secondary badge-status\">Nháp</span>\r\n");
            EndContext();
#line 388 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                                }
                                                

                                            }

                                        

#line default
#line hidden
            BeginContext(22434, 189, true);
            WriteLiteral("                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n\r\n                    </form>\r\n\r\n");
            EndContext();
#line 403 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                      
                        if (Model.Id != 0)
                        {

#line default
#line hidden
            BeginContext(22718, 90, true);
            WriteLiteral("                            <div class=\"clearfix\">\r\n\r\n                            </div>\r\n");
            EndContext();
            BeginContext(22810, 737, true);
            WriteLiteral(@"                            <br />
                            <div class=""col-sm-12"">
                                <table class=""table table-bordered"">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Nội dung</th>
                                            <th>Đơn vị</th>
                                            <th>SL</th>
                                            <th>Đơn giá</th>
                                            <th>Thành tiền</th>
                                            <th>Ghi chú</th>
                                            <th width=""50px"" ");
            EndContext();
            BeginContext(23549, 10, false);
#line 422 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                                         Write(hideAction);

#line default
#line hidden
            EndContext();
            BeginContext(23560, 365, true);
            WriteLiteral(@"><button title=""Thêm chi tiết"" class=""btn btn-warning"" id=""open-modal-credit-item""><i class=""fa fa-plus""></i></button></th>
                                        </tr>
                                    </thead>
                                    <tbody id=""tbody-item""></tbody>
                                </table>
                            </div>
");
            EndContext();
#line 428 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                        }
                    

#line default
#line hidden
            BeginContext(23975, 339, true);
            WriteLiteral(@"

                </div>


            </div>


        </div>

    </div>



</section>



<div class=""modal fade show"" data-backdrop=""static"" id=""modal-credit-detail"" aria-modal=""true"" role=""dialog"">
    <div class=""modal-dialog modal-lg"">
        <div class=""modal-content"">
            <div class=""modal-header"">
");
            EndContext();
#line 452 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                   
                    string refixDetail = "";
                    if (Model.CreaditType == Contanst.CreditType_TamUng)
                    {
                        refixDetail = "tạm ứng";
                    } else if (Model.CreaditType == Contanst.CreditType_HoanUng)
                    {
                        refixDetail = "hoàn ứng";
                    }

                

#line default
#line hidden
            BeginContext(24728, 58, true);
            WriteLiteral("                <h4 class=\"modal-title\">Nội dung chi tiết ");
            EndContext();
            BeginContext(24788, 11, false);
#line 463 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                                      Write(refixDetail);

#line default
#line hidden
            EndContext();
            BeginContext(24800, 420, true);
            WriteLiteral(@"</h4>
                <button type=""button"" class=""close"" data-dismiss=""modal"" aria-label=""Close"">
                    <span aria-hidden=""true"">×</span>
                </button>
            </div>
            <div class=""modal-body"">
                <form class=""form-horizontal"" id=""form-credit-detail""></form>

            </div>
            <div class=""modal-footer"">
                <button type=""button"" ");
            EndContext();
            BeginContext(25222, 10, false);
#line 473 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                  Write(hideAction);

#line default
#line hidden
            EndContext();
            BeginContext(25233, 456, true);
            WriteLiteral(@" class=""btn btn-warning"" id=""btn-save-credit-item"">OK</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>



<div class=""modal fade show"" data-backdrop=""static"" id=""modal-approve-credit"" aria-modal=""true"" role=""dialog"">
    <div class=""modal-dialog"">
        <div class=""modal-content"">
            <div class=""modal-header"">
                <h4 class=""modal-title"">Duyệt ");
            EndContext();
            BeginContext(25691, 9, false);
#line 487 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                          Write(titlePage);

#line default
#line hidden
            EndContext();
            BeginContext(25701, 468, true);
            WriteLiteral(@"</h4>
                <button type=""button"" class=""close"" data-dismiss=""modal"" aria-label=""Close"">
                    <span aria-hidden=""true"">×</span>
                </button>
            </div>
            <div class=""modal-body"">

                <div class=""row"">
                    <label class=""col-md-6 control-label"">Số tiền yêu cầu</label>
                    <div class=""col-md-6"">
                        <input type=""text"" class=""form-control""");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 26169, "\"", 26201, 1);
#line 497 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
WriteAttributeValue("", 26177, Model.RequestedAmount, 26177, 24, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(26202, 267, true);
            WriteLiteral(@" disabled=""disabled"" />
                    </div>

                    <label class=""col-md-6 control-label"">Số tiền duyệt</label>
                    <div class=""col-md-6"">
                        <input type=""text"" class=""form-control"" id=""txt-approve-amount""");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 26469, "\"", 26558, 1);
#line 502 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
WriteAttributeValue("", 26477, Model.ApprovedAmount.HasValue?Model.ApprovedAmount.Value:Model.RequestedAmount, 26477, 81, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(26559, 604, true);
            WriteLiteral(@" />
                    </div>
                </div>

            </div>
            <div class=""modal-footer"">
                <button type=""button"" class=""btn btn-warning"" id=""btn-approve"">OK</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>



<div class=""modal fade show"" data-backdrop=""static"" id=""modal-reject-credit"" aria-modal=""true"" role=""dialog"">
    <div class=""modal-dialog"">
        <div class=""modal-content"">
            <div class=""modal-header"">
                <h4 class=""modal-title"">Từ chối ");
            EndContext();
            BeginContext(27165, 9, false);
#line 522 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                                            Write(titlePage);

#line default
#line hidden
            EndContext();
            BeginContext(27175, 1516, true);
            WriteLiteral(@"</h4>
                <button type=""button"" class=""close"" data-dismiss=""modal"" aria-label=""Close"">
                    <span aria-hidden=""true"">×</span>
                </button>
            </div>
            <div class=""modal-body"">

                <div class=""row"">
                    <label class=""col-md-6 control-label"">Ghi chú lý do từ chối</label>
                    <div class=""col-md-6"">
                        <input type=""text"" class=""form-control"" id=""txt-reject-note""  />
                    </div>
                </div>

            </div>
            <div class=""modal-footer"">
                <button type=""button"" class=""btn btn-warning"" id=""btn-reject"">OK</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>





<div class=""modal fade show"" id=""modal-attach-upload"" aria-modal=""true"" role=""dialog"">
    <div class=""modal-dialog"">
        <div class=""modal-content"">
            <div class=""modal-he");
            WriteLiteral(@"ader"">
                <h4 class=""modal-title"">Đính kèm file</h4>
                <button type=""button"" class=""close"" data-dismiss=""modal"" aria-label=""Close"">
                    <span aria-hidden=""true"">×</span>
                </button>
            </div>
            <div class=""modal-body"">
                <form id=""formattact"" name=""formattact"" class=""form-horizontal"" action=""/CreditRequest/CreditRequestDetail"" method=""post"" enctype=""multipart/form-data"">
                    ");
            EndContext();
            BeginContext(28693, 23, false);
#line 561 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
                Write(Html.AntiForgeryToken());

#line default
#line hidden
            EndContext();
            BeginContext(28717, 84, true);
            WriteLiteral("\r\n                    <input type=\"hidden\" id=\"attachcreditId\" name=\"attachcreditId\"");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 28801, "\"", 28820, 1);
#line 562 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
WriteAttributeValue("", 28809, Model.Id, 28809, 11, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(28821, 79, true);
            WriteLiteral(" />\r\n                    <input type=\"hidden\" id=\"creditType\" name=\"creditType\"");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 28900, "\"", 28928, 1);
#line 563 "F:\Projects\OnSVN\IchiWeb\WebApp\Views\CreditRequest\CreditRequestDetail.cshtml"
WriteAttributeValue("", 28908, Model.CreaditType, 28908, 20, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(28929, 307, true);
            WriteLiteral(@" />
                    <input type=""file"" name=""postedFile"" />
                    <input type=""submit"" value=""Upload"" class=""btn btn-sm btn-success"" />
                </form>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>



");
            EndContext();
            DefineSection("scripts", async() => {
                BeginContext(29253, 6, true);
                WriteLiteral("\r\n    ");
                EndContext();
                BeginContext(29259, 47, false);
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "59ac4c44c3699557329f0cebf0aad9320a0cb60059560", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_3);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                EndContext();
                BeginContext(29306, 6, true);
                WriteLiteral("\r\n    ");
                EndContext();
                BeginContext(29312, 68, false);
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "59ac4c44c3699557329f0cebf0aad9320a0cb60060818", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_4);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                EndContext();
                BeginContext(29380, 6, true);
                WriteLiteral("\r\n    ");
                EndContext();
                BeginContext(29386, 63, false);
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "59ac4c44c3699557329f0cebf0aad9320a0cb60062076", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_5);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                EndContext();
                BeginContext(29449, 6, true);
                WriteLiteral("\r\n    ");
                EndContext();
                BeginContext(29455, 76, false);
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "59ac4c44c3699557329f0cebf0aad9320a0cb60063334", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_6);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                EndContext();
                BeginContext(29531, 6, true);
                WriteLiteral("\r\n    ");
                EndContext();
                BeginContext(29537, 83, false);
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "59ac4c44c3699557329f0cebf0aad9320a0cb60064592", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_7);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                EndContext();
                BeginContext(29620, 15732, true);
                WriteLiteral(@"

    <script>
        $(document).ready(function () {

            $("".date"").datepicker({
                format: ""dd/mm/yyyy""
            }).on('changeDate', function (e) {
                $(this).datepicker('hide');
            });

            $(""#btn-save"").click(function () {
                SaveCreditRequest();


            });

            $(""#open-modal-credit-item"").click(function () {
                LoadCreditItemForm(0);
            });

            $(""#btn-save-credit-item"").click(function () {
                SaveItemCreditDetail();
            });

            if (parseFloat($(""#header-requestId"").val()) > 0) {
                GetItemByCreditId();
            }

            /*========= action change status ======================*/

            $(""#btn-sentchecked"").click(function () {
                ChangeStatus(""waiting"");
            });

            $(""#btn-cancel"").click(function () {
                ChangeStatus(""canceled"");
            });

     ");
                WriteLiteral(@"       $(""#btn-reviewed"").click(function () {
                ChangeStatus(""reviewed"");
            });

            $(""#btn-reject"").click(function () {
                ChangeStatus(""rejected"");
            });



            $(""#btn-open-approve"").click(function () {
                let requestType = $(""#CreaditType"").val();
                if (requestType == ""HU"")
                {
                    ChangeStatus(""approved"");
                    
                } else
                {
                    $(""#modal-approve-credit"").modal();
                }

                
            });

            $(""#btn-approve"").click(function () {
                let amountApprove = $(""#txt-approve-amount"").val();
                if (amountApprove == ""0"" || amountApprove == """" || amountApprove == null) {
                    bootbox.alert(AlertFail(""Số tiền cần duyệt không được trống""));
                } else {
                    ChangeStatus(""approved"");
                }
     ");
                WriteLiteral(@"          
            });


            $(""#btn-open-reject"").click(function () {
                $(""#modal-reject-credit"").modal();
            });

            $(""#btn-reject"").click(function () {
                let noteReject = $(""#txt-reject-note"").val();
                if (noteReject == """" || noteReject == null) {
                    bootbox.alert(AlertFail(""Vui lòng ghi chú lý do từ chối""));
                } else {
                    ChangeStatus(""rejected"");
                }

            });






            $(""#btn-sent-account"").click(function () {
                ChangeStatus(""waitacc"");
            });

            $(""#btn-sent-approve"").click(function () {
                ChangeStatus(""reviewed"");
            });

            $(""#btn-completed"").click(function () {
                ChangeStatus(""completed"");
            });


            /*========= end action change status ======================*/


            $(""#btn-view-pdf"").click(function () {
 ");
                WriteLiteral(@"               let requestId = parseFloat($(""#header-requestId"").val());
                let requestType = $(""#CreaditType"").val();
                if (requestType == ""TU"")
                {
                    window.open(""/CreditRequest/PrintViewTU?tuId="" + requestId, 'Xem pdf');

                } else if (requestType == ""HU"")
                {
                    window.open(""/CreditRequest/PrintViewHU?huId="" + requestId, 'Xem pdf');
                }

                
            });

            $(""#btn-open-upload"").click(function () {
                $(""#modal-attach-upload"").show();
            });


        })
        function ValidCreditRequest() {
            $.validator.addMethod(""nonZeroAmount"", function (value, element) {
                return value != ""0"";
            }, ""Nhập số tiền yêu cầu"");

            var resutlValid = $(""#form-creditRequest"").validate({
                rules: {
                    ""creaditType"": ""required"",
                    ""RequestedAmo");
                WriteLiteral(@"unt"": {
                        required: true,
                        nonZeroAmount: true
                    },
                    ""Reason"": ""required"",
                },
                messages: {
                    ""creaditType"": ""Chọn loại yêu câu"",
                    ""RequestedAmount"": {
                        required: ""Nhập số tiền yêu cầu"",
                        nonZeroAmount: ""Số tiền yêu cầu khác 0""
                    },
                    ""Reason"": ""Nhập nội dung"",
                }
            }).form();
            return resutlValid;
        }

        function SaveCreditRequest() {
            var valid = ValidCreditRequest();
            if (valid) {
                var saveData = FormToObject(""#form-creditRequest"", """");
                saveData.DateRequest = ConverFormatDate($(""#DateRequest"").val());

                $.ajax({
                    type: ""POST"",
                    contentType: 'application/json; charset=utf-8',
                    url: ""/C");
                WriteLiteral(@"reditRequest/SaveCreditRequest"",
                    dataType: 'json',
                    data: JSON.stringify(saveData),
                    beforeSend: function () {
                        ShowWaiting();
                    },
                    success: function (res) {
                        HideWaiting();
                        if (res.isSuccess === true) {
                            bootbox.alert(AlertSuccess(""Lưu dữ liệu thành công""), function () {

                                location.href = ""/CreditRequest/CreditRequestDetail/"" + res.longValReturn + ""/"" + saveData.CreaditType;
                            });
                        } else {
                            bootbox.alert(AlertFail(res.errorMessage));
                        }

                    }
                });


            }



        }


        function ChangeStatus(statusCode) {

            let modelChangeStatus = {
                ""requestId"": parseFloat($(""#header-requestId"").val()),");
                WriteLiteral(@"
                ""status"": statusCode,
                ""userName"": """",
                ""amountApprove"": parseFloat($(""#txt-approve-amount"").val()),
                ""rejectNote"": $(""#txt-reject-note"").val()
            }

            $.ajax({
                type: ""POST"",
                contentType: 'application/json; charset=utf-8',
                url: ""/CreditRequest/ChangeCreditRequestStatus"",
                dataType: 'json',
                data: JSON.stringify(modelChangeStatus),
                beforeSend: function () {
                    ShowWaiting();
                },
                success: function (res) {
                    HideWaiting();
                    if (res.isSuccess === true) {
                        bootbox.alert(AlertSuccess(""Chuyển trạng thái thành công""), function () {
                            $(""#txt-approve-amount"").val(null);
                            $(""#txt-reject-note"").val(null);
                            let requestType = $(""#CreaditType"").");
                WriteLiteral(@"val();
                            location.href = ""/CreditRequest/CreditRequestDetail/"" + modelChangeStatus.requestId + ""/"" + requestType;
                        });

                    } else {
                        bootbox.alert(AlertFail(res.errorMessage));
                    }

                }
            });

        }








        //==================== Credit Item detail ====================


        function LoadCreditItemForm(iditem) {
            ShowWaiting();
            let crequestID = $(""#Id"").val();
            $(""#form-credit-detail"").load(""/CreditRequest/_PartialCreditItemDetail?id="" + iditem + ""&requestId="" + crequestID, function () {
                HideWaiting();
                $(""#modal-credit-detail"").modal();
            });
        }

        function validFormCreditDetailItem() {
            var resutlValid = $(""#form-credit-detail"").validate({
                rules: {
                    ""Name"": ""required"",
                    ""Unit"":");
                WriteLiteral(@" ""required"",
                    ""Quanti"": ""required"",
                    ""Price"": ""required"",
                },
                messages: {
                    ""Name"": ""Bắt buộc"",
                    ""Unit"": ""Bắt buộc"",
                    ""Quanti"": ""Bắt buộc"",
                    ""Price"": ""Bắt buộc"",
                }
            }).form();
            return resutlValid;
        }

        function SaveItemCreditDetail() {
            var validItem = validFormCreditDetailItem();
            if (validItem) {

                var saveDataItem = FormToObject(""#form-credit-detail"", """");
                $.ajax({
                    type: ""POST"",
                    contentType: 'application/json; charset=utf-8',
                    url: ""/CreditRequest/SaveCreditRequestItem"",
                    dataType: 'json',
                    data: JSON.stringify(saveDataItem),
                    beforeSend: function () {
                        ShowWaiting();
                    },
       ");
                WriteLiteral(@"             success: function (res) {
                        HideWaiting();
                        if (res.isSuccess === true) {
                            bootbox.alert(AlertSuccess(""Lưu dữ liệu thành công""), function () {
                                $(""#form-credit-detail"")[0].reset();
                                GetItemByCreditId();
                            });

                        } else {
                            bootbox.alert(AlertFail(res.errorMessage));
                        }

                    }
                });
            }

        }


        function GetItemByCreditId() {
            let requestId = $(""#Id"").val();
            let hidAction = """";
            if ($(""#Status"").val() != ""draft"")
            {
                hidAction = ""display:none;"";
            }

            $.ajax({
                type: ""GET"",
                contentType: 'application/json; charset=utf-8',
                url: ""/CreditRequest/ListItemByCreditId?requ");
                WriteLiteral(@"estId="" + requestId,
                success: function (result) {
                    debugger;
                    let htmlitems = """";
                    if (result.length > 0) {
                        let stt = 1;
                        let total = 0;
                        $.each(result, function (index, value) {

                            total = total + value.total;
                            htmlitems = htmlitems + ""<tr><td>"" + stt + ""</td>"" + ""<td>"" + value.name
                                + ""</td><td>"" + value.unit + ""</td>""
                                + ""</td><td>"" + value.quanti + ""</td>""
                                + ""</td><td class='number-divide' style='text-align:right;'>"" + value.price + ""</td>""
                                + ""</td><td class='number-divide' style='text-align:right;'>"" + value.total + ""</td>""
                                + ""</td><td class='number-divide' style='text-align:right;'>"" + value.note + ""</td>""
                                + ");
                WriteLiteral(@"""</td><td style='text-align:center;"" + hidAction+""'><span class='fa fa-edit' onclick='LoadCreditItemForm("" + value.id + "")' ></span>&nbsp;<span class='fa fa-trash' onclick='DeleteItemRequest("" + value.id + "")' ></span></td>""
                                + ""</tr>"";
                            stt++;
                        });
                        $(""#RequestedAmount"").val(total);
                        htmlitems += ""<tr><td colspan='5' style='text-align:right;'><strong>Tổng</strong></td>"" +
                            ""<td class='number-divide' style='text-align:right;font-weight:bold;'>"" + total + ""</td>"" +
                            ""<td></td><td style='"" + hidAction+""'></td>""
                        ""</tr>"";

                    }

                    $(""#tbody-item"").html(htmlitems);
                    FormatNumberDevide();
                }
            });
        }

        function FormatNumberDevide() {
            $('.number-divide').divide({
                delimiter: ',");
                WriteLiteral(@"',
                divideThousand: true,
                delimiterRegExp: /[\.\,\s]/g

            });
        }


        function DeleteItemRequest(itemId) {

            var conf = bootbox.confirm(""Bạn có chắc muốn xoá dòng này?"", function () {
                if (conf) {
                    $.ajax({
                        type: ""GET"",
                        contentType: 'application/json; charset=utf-8',
                        url: ""/CreditRequest/DeleteItem?itemId="" + itemId,
                        success: function (result) {
                            bootbox.alert(AlertSuccess(""Đã xoá thành công""), function () {
                                GetItemByCreditId();
                            });

                        }
                    });
                }
            });


        }



        function DeleteAttachment(attachId) {

            var conf = bootbox.confirm(""Bạn có chắc muốn file đính kèm này?"", function () {
                if (conf) {
    ");
                WriteLiteral(@"                $.ajax({
                        type: ""GET"",
                        contentType: 'application/json; charset=utf-8',
                        url: ""/CreditRequest/DeleteAttachment?attachId="" + attachId,
                        success: function (result) {
                            bootbox.alert(AlertSuccess(""Đã xoá thành công""), function () {

                                let requestType = $(""#CreaditType"").val();
                                let requestId = parseFloat($(""#header-requestId"").val());
                                location.href = ""/CreditRequest/CreditRequestDetail/"" + requestId + ""/"" + requestType;
                            });

                        }
                    });
                }
            });


        }



        function DownloadFile(attachId) {


            $.ajax({
                type: ""GET"",
                contentType: 'application/json; charset=utf-8',
                url: ""/CreditRequest/DownloadAttachFile?at");
                WriteLiteral(@"tachId="" + attachId,
                success: function (r) {

                    //Convert Base64 string to Byte Array.
                    var bytes = Base64ToBytes(r);

                    //Convert Byte Array to BLOB.
                    var blob = new Blob([bytes], { type: ""application/octetstream"" });

                    //Check the Browser type and download the File.
                    var isIE = false || !!document.documentMode;
                    if (isIE) {
                        window.navigator.msSaveBlob(blob, fileName);
                    } else {
                        var url = window.URL || window.webkitURL;
                        link = url.createObjectURL(blob);
                        var a = $(""<a />"");
                        a.attr(""download"", fileName);
                        a.attr(""href"", link);
                        $(""body"").append(a);
                        a[0].click();
                        $(""body"").remove(a);
                    }

        ");
                WriteLiteral(@"        }
            });



        }
            
        function Base64ToBytes(base64) {
            var s = window.atob(base64);
            var bytes = new Uint8Array(s.length);
            for (var i = 0; i < s.length; i++) {
                bytes[i] = s.charCodeAt(i);
            }
            return bytes;
        };






    </script>

");
                EndContext();
            }
            );
            BeginContext(45355, 4, true);
            WriteLiteral("\r\n\r\n");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<DAL.Models.CreditRequest.CreditRequestViewModel> Html { get; private set; }
    }
}
#pragma warning restore 1591
