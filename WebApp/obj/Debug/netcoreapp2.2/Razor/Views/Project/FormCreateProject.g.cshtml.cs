#pragma checksum "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "5cbcc05b0fd758348580f9ea26f0cd20b06a24db"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Project_FormCreateProject), @"mvc.1.0.view", @"/Views/Project/FormCreateProject.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Project/FormCreateProject.cshtml", typeof(AspNetCore.Views_Project_FormCreateProject))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"5cbcc05b0fd758348580f9ea26f0cd20b06a24db", @"/Views/Project/FormCreateProject.cshtml")]
    public class Views_Project_FormCreateProject : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<DAL.Models.ProjectFinancialSummar.ProjectFinancialSummarGridModel>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(74, 383, true);
            WriteLiteral(@"
<div class=""modal-content"">
    <div class=""modal-header p-2"">
        <h5 class=""modal-title"" id=""promotion-title"">Thêm mới nguồn thu</h5>
        <button type=""button"" class=""close"" data-dismiss=""modal"" aria-label=""Close"">
            <span aria-hidden=""true"">×</span>
        </button>
    </div>
    <div class=""modal-body"">
        <input id=""ProjectFinancialSummarId""");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 457, "\"", 474, 1);
#line 11 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
WriteAttributeValue("", 465, Model.Id, 465, 9, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(475, 11, true);
            WriteLiteral(" hidden/>\r\n");
            EndContext();
            BeginContext(575, 626, true);
            WriteLiteral(@"        <fieldset class=""border rounded-1 pb-3 pe-3 ps-3 mb-3"">
            <legend class=""float-none w-auto px-3 text-uppercase fw-bold fs-2 mb-0 text-blue"">Thông tin tổng quát</legend>
            <form class=""form-horizontal"" id=""frmCreateProject"">
                <div class=""row"">
                    <div class=""col-sm-6"">
                        <div class=""form-group row"">
                            <label class=""col-md-4 col-form-label"">Thời gian thực hiện</label>
                            <div class=""input-group-append col-md-8"">
                                <input type=""date"" class=""form-control""");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 1201, "\"", 1249, 1);
#line 21 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
WriteAttributeValue("", 1209, Model.TimeStart?.ToString("yyyy-MM-dd"), 1209, 40, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(1250, 170, true);
            WriteLiteral(" name=\"thoi_gian_bat_dau\" id=\"a_thoi_gian_bat_dau\" />\r\n                                <h3>-</h3>\r\n                                <input type=\"date\" class=\"form-control\"");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 1420, "\"", 1466, 1);
#line 23 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
WriteAttributeValue("", 1428, Model.TimeEnd?.ToString("yyyy-MM-dd"), 1428, 38, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(1467, 422, true);
            WriteLiteral(@" name=""thoi_gian_ket_thuc"" id=""a_thoi_gian_ket_thuc"" />
                            </div>
                        </div>
                        <div class=""form-group row"">
                            <label class=""col-md-4 col-form-label"">Mã nguồn thu<span class=""text-red"">*</span></label>
                            <div class=""col-md-8"">
                                <input type=""text"" class=""form-control""");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 1889, "\"", 1915, 1);
#line 29 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
WriteAttributeValue("", 1897, Model.ProjectCode, 1897, 18, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(1916, 437, true);
            WriteLiteral(@" name=""ma_du_an"" id=""a_ma_du_an"" />
                            </div>
                        </div>
                        <div class=""form-group row"">
                            <label class=""col-md-4 col-form-label"">Tên nguồn thu<span class=""text-red"">*</span></label>
                            <div class=""col-md-8"">
                                <input type=""text"" class=""form-control"" id=""a_ten_du_an"" name=""ten_du_an""");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 2353, "\"", 2379, 1);
#line 35 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
WriteAttributeValue("", 2361, Model.ProjectName, 2361, 18, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(2380, 373, true);
            WriteLiteral(@" />
                            </div>
                        </div>
                        <div class=""form-group row"">
                            <label class=""col-md-4 col-form-label"">Căn cứ pháp lý <span class=""text-red"">*</span></label>
                            <div class=""col-md-8"">
                                <input type=""text"" class=""form-control""");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 2753, "\"", 2778, 1);
#line 41 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
WriteAttributeValue("", 2761, Model.LegalBasis, 2761, 17, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(2779, 382, true);
            WriteLiteral(@" id=""a_can_cu_phap_ly"" name=""can_cu_phap_ly"" />
                            </div>
                        </div>

                        <div class=""form-group row"">
                            <label class=""col-md-4 col-form-label"">Người tạo</label>
                            <div class=""col-md-8"">
                                <input type=""text"" class=""form-control""");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 3161, "\"", 3185, 1);
#line 48 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
WriteAttributeValue("", 3169, Model.CreatedBy, 3169, 16, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(3186, 458, true);
            WriteLiteral(@" disabled=""disabled"" />
                            </div>
                        </div>
                        <div class=""form-group row"">
                            <label class=""col-md-4 col-form-label"">Ngày tạo</label>
                            <div class=""col-md-8"">
                                <div class=""input-group date"">
                                    <input type=""text"" id=""DateRequest"" disabled=""disabled"" name=""DateRequest""");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 3644, "\"", 3693, 1);
#line 55 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
WriteAttributeValue("", 3652, Model.CreatedDate.ToString("dd/MM/yyyy"), 3652, 41, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(3694, 769, true);
            WriteLiteral(@" class=""form-control"">
                                    <span class=""input-group-addon group-date-icon""><i class=""far fa-calendar-alt""></i></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class=""col-sm-6"">

                        <div class=""form-group row"">
                            <label class=""col-md-4 col-form-label"">Tổng hạn mức <span class=""text-red"">*</span></label>
                            <div class=""col-md-8"">
                                <input type=""text"" class=""form-control"" style=""font-weight:bold;""
                                       name=""tong_han_muc"" id=""a_tong_han_muc"" onblur=""formatTotalAmount()""");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 4463, "\"", 4489, 1);
#line 68 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
WriteAttributeValue("", 4471, Model.TotalAmount, 4471, 18, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(4490, 110, true);
            WriteLiteral("  autocomplete=\"off\"/>\r\n                                <input type=\"hidden\"  id=\"a_tong_han_muc_khong_format\"");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 4600, "\"", 4626, 1);
#line 69 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
WriteAttributeValue("", 4608, Model.TotalAmount, 4608, 18, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(4627, 106, true);
            WriteLiteral(" />\r\n                               \r\n                            </div>\r\n                        </div>\r\n");
            EndContext();
            BeginContext(5393, 277, true);
            WriteLiteral(@"                        <div class=""form-group row"">
                            <label class=""col-md-4 col-form-label"">Ghi chú</label>
                            <div class=""col-md-8"">
                                <textarea class=""form-control"" id=""a_ghi_chu"" rows=""3"">");
            EndContext();
            BeginContext(5671, 11, false);
#line 85 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
                                                                                  Write(Model.Notes);

#line default
#line hidden
            EndContext();
            BeginContext(5682, 81, true);
            WriteLiteral("</textarea>\r\n                            </div>\r\n                        </div>\r\n");
            EndContext();
            BeginContext(6147, 649, true);
            WriteLiteral(@"                        <div class=""form-group row"">
                            <div class=""col-md-4 pt-3"">

                                <input type=""button"" value=""Đính kèm"" class=""btn btn-warning"" onclick=""UploadFileProject()"" />
                                <!-- Input file ẩn -->
                                <input type=""file"" id=""fileInputProject"" style=""display: none;"" />
                            </div>
                            <div class=""col-md-8"">
                                <table class=""table"" width=""100%"" id=""table_Attact_File"">
                                    <tbody id=""table_phan_bo_chi_tiet"">
");
            EndContext();
#line 104 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
                                         if (ViewBag.DataFileAttach != null )
                                        {
                                            foreach (var file in ViewBag.DataFileAttach)
                                            {

#line default
#line hidden
            BeginContext(7055, 495, true);
            WriteLiteral(@"                                        <tr>
                                            <td width=""10%"" style=""text-align:center;"">
                                                <a>
                                                    <span class=""fa fa-download""></span>
                                                </a>
                                            </td>
                                            <td width=""70%"">
                                                <a");
            EndContext();
            BeginWriteAttribute("href", " href=\"", 7550, "\"", 7570, 1);
#line 115 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
WriteAttributeValue("", 7557, file.URLPath, 7557, 13, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(7571, 17, true);
            WriteLiteral(" target=\"_blank\">");
            EndContext();
            BeginContext(7589, 13, false);
#line 115 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
                                                                                   Write(file.FileName);

#line default
#line hidden
            EndContext();
            BeginContext(7602, 310, true);
            WriteLiteral(@"</a>
                                            </td>
                                            <td width=""10%"" style=""text-align:center;color:crimson;"">
                                                <span class=""fa fa-trash delete-file""
                                                      data-id=""");
            EndContext();
            BeginContext(7913, 7, false);
#line 119 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
                                                          Write(file.Id);

#line default
#line hidden
            EndContext();
            BeginContext(7920, 80, true);
            WriteLiteral("\"\r\n                                                      style=\"cursor:pointer;\"");
            EndContext();
            BeginWriteAttribute("onclick", "\r\n                                                      onclick=\"", 8000, "\"", 8085, 3);
            WriteAttributeValue("", 8065, "RemoveFile(", 8065, 11, true);
#line 121 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
WriteAttributeValue("", 8076, file.Id, 8076, 8, false);

#line default
#line hidden
            WriteAttributeValue("", 8084, ")", 8084, 1, true);
            EndWriteAttribute();
            BeginContext(8086, 110, true);
            WriteLiteral("></span>\r\n                                            </td>\r\n\r\n                                        </tr>\r\n");
            EndContext();
#line 125 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
                                            }
                                        }

#line default
#line hidden
            BeginContext(8286, 613, true);
            WriteLiteral(@"
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </fieldset>
    </div>
    <div class=""modal-footer"">
        <button type=""button"" class=""btn btn-warning"" onclick=""CreateProject()"">Lưu</button>

    </div>

</div>
<script>
    $(document).ready(function () {
        if ($(""#ProjectFinancialSummarId"").val() != ""0"") {
            listFileAttact = [];
            formatTotalAmount();
            var items = ");
            EndContext();
            BeginContext(8900, 48, false);
#line 148 "D:\Projects\OnGit\CreditRequestSystem\WebApp\Views\Project\FormCreateProject.cshtml"
                   Write(Html.Raw(Json.Serialize(ViewBag.DataFileAttach)));

#line default
#line hidden
            EndContext();
            BeginContext(8948, 3179, true);
            WriteLiteral(@";
            items.forEach(function (item) {
                listFileAttact.push(item.id)
            });
            console.log(""items"", items)
            $('#a_ma_du_an').prop('readonly', true);
        }
        else {
            var projectCode = generateCode(""DA"");
            if (projectCode != """") {
                $('#a_ma_du_an').val(projectCode);
                //$('#a_ma_du_an').prop('readonly', true);
            }
            
        }

        // Khi người dùng chọn file
        $('#fileInputProject').on('change', function () {
            const file = this.files[0]; // Lấy file được chọn
            if (file) {
                // Upload file
                const fileData = new FormData();
                fileData.append('file', this.files[0]);

                $.ajax({
                    url: '/FileUpload/UploadFile', // Đường dẫn đến API xử lý file
                    type: 'POST',
                    data: fileData,
                    contentType: false,
");
            WriteLiteral(@"                    processData: false,
                    success: function (response) {

                        if (response.success == true && response.fileNameAttactId > 0) {
                            const html = `
                                                <tr>
                                                    <td width=""40px"" style=""text-align:center;"">
                                                        <a  target=""_blank"">
                                                            <span class=""fa fa-download""></span>
                                                        </a>
                                                    </td>
                                                    <td>
                                                        <a href=""${response.filePath}"" target=""_blank"">${response.fileName}</a>
                                                    </td>
                                                     <td width=""40px"" style=""text-align:center;color");
            WriteLiteral(@":crimson;"">
                                                        <span class=""fa fa-trash delete-file""
                                                              data-id=""${response.fileNameAttactId}""
                                                              style=""cursor:pointer;""
                                                              onclick=""RemoveFile(${response.fileNameAttactId})""></span>
                                                    </td>
                                                </tr>
                                            `;

                            $('#table_Attact_File').append(html)
                        }
                        listFileAttact.push(response.fileNameAttactId)
                        toastr.success('Tải file thành công!', 'Thành công', { positionClass: ""toast-top-center"" });
                    },
                    error: function () {
                        toastr.error('Có lỗi khi tải file!', 'Lỗi', { positionClass: ""toast-");
            WriteLiteral("top-center\" });\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    });\r\n</script>");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<DAL.Models.ProjectFinancialSummar.ProjectFinancialSummarGridModel> Html { get; private set; }
    }
}
#pragma warning restore 1591
